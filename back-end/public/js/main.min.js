function showRegWindow(){let e=this.dataset.reg;document.querySelector(e).classList.remove("hide"),document.onkeydown=function(e){27==e.keyCode&&closeRegWindow(),console.log(e),document.onkeydown=null}}function closeRegWindow(){document.querySelectorAll(".wrap-registr").forEach(function(e){e.classList.add("hide"),document.onkeydown=null})}function showLoginWindow(){console.log(111);let e=this.dataset.login;document.querySelector(e).classList.remove("hide"),document.onkeydown=function(e){27==e.keyCode&&closeRegWindow(),console.log(e),document.onkeydown=null}}function freeClick(e){e.stopPropagation()}document.querySelectorAll(".login__reg").forEach(function(e){e.onclick=showRegWindow}),document.querySelectorAll(".close").forEach(function(e){e.onclick=closeRegWindow}),document.querySelectorAll(".wrap-registr").forEach(function(e){e.onclick=closeRegWindow}),document.querySelectorAll(".login__enter").forEach(function(e){e.onclick=showLoginWindow}),document.querySelectorAll(".modal-stop").forEach(function(e){e.onclick=freeClick}),document.querySelector(".form-modal__rules--agree").onclick=readRules;let left=0;function readRules(){let e=document.querySelector(".modal-registr");e.style.marginLeft=left-400+"px",window.matchMedia("(max-width: 450px)").matches&&(e.style.marginLeft=left-300+"px")}function goBack(){document.querySelector(".modal-registr").style.marginLeft=left}function agree(){if(this.checked){const e=document.querySelector(".btn-reg");e.classList.remove("disabled"),e.disabled=!1}else document.querySelector(".btn-reg").classList.add("disabled")}document.querySelector(".modal-right__go-back").onclick=goBack,document.querySelector("#input__checkbox").onchange=agree,$(".review-slider-wrap").slick({slidesToShow:1,slidesToScroll:1,autoplay:!0,autoplaySpeed:2e3});const form=document.querySelector("#form-reg");form.addEventListener("submit",e=>{e.preventDefault();let o=document.querySelector("#input__login").value,t=document.querySelector("#input__pass").value,n=document.querySelector("#input__email").value;if(o.length<6||o.length>20)return alert("Длина логина от 6 до 20 символов"),!1;if(parseInt(o.substr(0,1)))return alert("Логин должен начинаться с буквы"),!1;for(let e=0;e<o.length;e++)if(!1===/^[a-zA-Z1-9]+$/.test(o))return alert("Вы ввели запрещенный символ!"),!0;if(t.length<=5||t.length>20)return alert("Длина пароля от 6 до 20 символов"),!1;for(let e=0;e<t.length;e++)if(!1===/^[a-zA-Z1-9]+$/.test(t))return alert("Вы ввели запрещенный символ!"),!0;if(parseInt(n.slice(0,1)))return alert("email должен начинаться с буквы"),!1;const c={method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrer:"no-referrer",body:JSON.stringify({name:o,pass:t,email:n})};fetch("/api/register",c).then(e=>e.json()).then(e=>{e.ok&&chips("Регистрация успешна"),e.ok||chips(e.message)}).catch(e=>{})});const formLogin=document.querySelector("#form-login");function setCookie(e,o,t){var n=new Date;n.setTime(n.getTime()+24*t*60*60*1e3);var c="expires="+n.toUTCString();document.cookie=e+"="+o+";"+c+";path=/"}function chips(e,o=3e3){let t=document.createElement("div");t.classList.add("chips"),t.textContent=e,addChips(t),setTimeout(function(){deleteChips(t)},o)}function deleteChips(e){let o=document.querySelector(".wrap-chips");e.remove(),0==o.children.length&&o.remove()}function createWrap(){let e=document.createElement("div");return e.classList.add("wrap-chips"),document.querySelector("body").appendChild(e),e}function addChips(e){let o=document.querySelector(".wrap-chips");o?o.appendChild(e):createWrap().appendChild(e)}function initMap(){const e={lat:50.391708,lng:30.492534};let o={center:e,zoom:12},t=new google.maps.Map(document.getElementById("map"),o),n=new google.maps.Marker({position:e,map:t}),c=new google.maps.InfoWindow({content:"<p>Smarts Bets</p>"});n.addListener("click",()=>{c.open(t,n)})}console.log(formLogin),formLogin.addEventListener("submit",e=>{e.preventDefault();let o=document.querySelector("#login__name").value,t=document.querySelector("#login__pass").value;const n={method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrer:"no-referrer",body:JSON.stringify({name:o,pass:t})};fetch("/api/auth",n).then(e=>e.json()).then(e=>{e.ok||chips(e.message),e.ok&&(chips("Вход успешен"),setCookie("token",e.token,1),location.href="welcome")}).catch(e=>{console.log(e)})}),(new WOW).init(),document.querySelector(".burger").onclick=function(){this.classList.toggle("active"),document.querySelector(".menu-body").classList.toggle("active")};